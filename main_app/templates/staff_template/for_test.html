{% extends "tb.html" %}
{% load static %}


{% block content %}
<h3>Расходы основной деятельности АО "Узбекистон темир йуллари" за месяц</h3>
<!-- Search input -->
<div class="form-group">
  <input type="text" id="searchInput" onkeyup="searchTable()" placeholder="Search...">
</div>
{% comment %} <form method="GET" action="{% url 'fortest' %}">
  <label for="start_year">Start year:</label>
  <input type="number" id="start_year" name="start_year" value="{{ start_year }}" min="2000" max="2023">
  <label for="start_month">Start month:</label>
  <input type="number" id="start_month" name="start_month" value="{{ start_month }}" min="1" max="12">
  <label for="end_year">End year:</label>
  <input type="number" id="end_year" name="end_year" value="{{ end_year }}" min="2000" max="2023">
  <label for="end_month">End month:</label>
  <input type="number" id="end_month" name="end_month" value="{{ end_month }}" min="1" max="12">
  <button type="submit">Submit</button>
</form> {% endcomment %}
<form action="staff/get_data/" method="post">
    {% csrf_token %}
    <label for="start_date">Boshlanish sanasi:</label>
    <input type="date" id="start_date" name="start_date">

    <label for="end_date">Tugash sanasi:</label>
    <input type="date" id="end_date" name="end_date">

    <input type="submit" value="Submit">
</form>


<!--a href="{% url 'barchasi_create' %}" class="btn btn-primary">Заполнять таблицу</a-->
<div class="table-responsive">
  <table border="1" id="data-table" class="table">
    <thead>
      <tr>
        <th></th>
        <th></th>
        <th colspan="39" style="text-align: center;">ПЕРЕВОЗКА</th>
        <th colspan="39" style="text-align: center;">ПВД</th>
        <th colspan="39" style="text-align: center;">ВСЕГО</th>
        </tr>
      <tr>
        <th rowspan="2" style="text-align: center;">№</th>
        <th rowspan="2" style="text-align: center;">Наимен.предприятии</th>
        <th colspan="3" style="text-align: center;">ФОТ</th>
        <th colspan="3" style="text-align: center;">Соц.налог</th>
        <th colspan="3" style="text-align: center;">Материалы_всего</th>
        <th colspan="3" style="text-align: center;">Материалы_МВСП</th>
        <th colspan="3" style="text-align: center;">Топливо_всего</th>
        <th colspan="3" style="text-align: center;">Топливо_на.тягу</th>
        <th colspan="3" style="text-align: center;">Эл.энергия_всего</th>
        <th colspan="3" style="text-align: center;">Эл.энергия_на.тягу</th>
        <th colspan="3" style="text-align: center;">Амортизация_всего</th>
        <th colspan="3" style="text-align: center;">Амортизация_гр.ваг.</th>
        <th colspan="3" style="text-align: center;">Рем.фонд</th>
        <th colspan="3" style="text-align: center;">Прочие </th>
        <th colspan="3" style="text-align: center;">всего</th>
        <th colspan="3" style="text-align: center;">ФОТ</th>
        <th colspan="3" style="text-align: center;">Соц.налог</th>
        <th colspan="3" style="text-align: center;">Материалы_всего</th>
        <th colspan="3" style="text-align: center;">Материалы_МВСП</th>
        <th colspan="3" style="text-align: center;">Топливо_всего</th>
        <th colspan="3" style="text-align: center;">Топливо_на.тягу</th>
        <th colspan="3" style="text-align: center;">Эл.энергия_всего</th>
        <th colspan="3" style="text-align: center;">Эл.энергия_на.тягу</th>
        <th colspan="3" style="text-align: center;">Амортизация_всего</th>
        <th colspan="3" style="text-align: center;">Амортизация_гр.ваг.</th>
        <th colspan="3" style="text-align: center;">Рем.фонд</th>
        <th colspan="3" style="text-align: center;">Прочие </th>
        <th colspan="3" style="text-align: center;">всего</th>
        <th colspan="3" style="text-align: center;">ФОТ</th>
        <th colspan="3" style="text-align: center;">Соц.налог</th>
        <th colspan="3" style="text-align: center;">Материалы_всего</th>
        <th colspan="3" style="text-align: center;">Материалы_МВСП</th>
        <th colspan="3" style="text-align: center;">Топливо_всего</th>
        <th colspan="3" style="text-align: center;">Топливо_на.тягу</th>
        <th colspan="3" style="text-align: center;">Эл.энергия_всего</th>
        <th colspan="3" style="text-align: center;">Эл.энергия_на.тягу</th>
        <th colspan="3" style="text-align: center;">Амортизация_всего</th>
        <th colspan="3" style="text-align: center;">Амортизация_гр.ваг.</th>
        <th colspan="3" style="text-align: center;">Рем.фонд</th>
        <th colspan="3" style="text-align: center;">Прочие </th>
        <th colspan="3" style="text-align: center;">всего</th>
      </tr>
      <tr>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
        <th>Факт 2022г</th>
        <th>Факт 2023г</th>
        <th>Разница (+;-)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td></td>
        <td>{{ user }}</td>
        {% for value in all_sum %}
           <td>{{ value }}</td>
        {% endfor %}
      </tr>
      {% for student, perevozka in student_perevozka_items.items %}
      <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ student.admin.last_name }}</td>
          {% for p in perevozka %}
              <td>{{ p }}</td>
          {% endfor %}  
      </tr>
      {% endfor %}
    </tbody>
  </table>



<!-- JavaScript for searching -->
<!-- JavaScript for searching -->
<script>
  document.getElementById('month-select').addEventListener('change', function() {
      window.location.href = "{% url 'rju_big_table' %}" + this.value;
  });
  </script>


<script>
function searchTable() {
let input, filter, table, tr, td, i;
input = document.getElementById("searchInput");
filter = input.value.toUpperCase();
table = document.querySelector(".table");
tr = table.getElementsByTagName("tr");

for (i = 1; i < tr.length; i++) { // Start from 1 to skip the header row
  let visible = false; // Whether the row should be visible

  // Loop through all cells in the row
  td = tr[i].getElementsByTagName("td");
  for (let j = 0; j < td.length; j++) {
    if (td[j] && td[j].classList.contains("searchable")) {
      if (td[j].textContent.toUpperCase().indexOf(filter) > -1) {
        visible = true;
        break; // No need to check other cells in the same row
      }
    }
  }

  // Show or hide the row based on visibility
  if (visible) {
    tr[i].style.display = "";
  } else {
    tr[i].style.display = "none";
  }
}
}
</script>



{% endblock %}
</head>
</html>